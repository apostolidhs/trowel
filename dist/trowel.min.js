!function(u,t){"function"==typeof define&&define.amd?define(["underscore"],t):"object"==typeof exports?module.exports=t(require("underscore")):u.trowel=u.trl=t(u._)}(this,function(u){if(!u||!u.VERSION)throw new Error("Trowel's JavaScript requires underscore");var t;!function(u){var t;!function(u){var t;!function(u){var t=function(){function u(){}return u.createStringFromCharPointGenerator=function(){var t=[];return{addCharPoint:function(e){t.push(u.fromCodePoint(e))},getString:function(){return t.join("")}}},u.getDigitFromCharPoint=function(t){return t-u.ZERO_CHAR_CODE},u.codePointAt=function(u,t){return u.codePointAt(t)},u.fromCodePoint=function(u){return String.fromCodePoint(u)},u.ZERO_CHAR_CODE="0".charCodeAt(0),u}();u.CharPoints=t}(t=u.utilities||(u.utilities={}))}(t=u.frontend||(u.frontend={}))}(t||(t={}));var t;!function(u){var t;!function(u){var t;!function(u){var t=!0,e=function(){function u(){}return u.WS={9:t,11:t,12:t,32:t,160:t,65279:t},u.LT={10:t,13:t,8232:t,514:t},u.KW={"break":t,"do":t,"instanceof":t,"typeof":t,"case":t,"else":t,"new":t,"var":t,"catch":t,"finally":t,"return":t,"void":t,"continue":t,"for":t,"switch":t,"while":t,"debugger":t,"function":t,"this":t,"with":t,"default":t,"if":t,"throw":t,"delete":t,"in":t,"try":t,"class":t,"enum":t,"extends":t,"super":t,"const":t,"export":t,"import":t,"implements":t,let:t,"private":t,"public":t,"interface":t,"package":t,"protected":t,"static":t,"yield":t},u.LIT={"null":t,"true":t,"false":t},u.PNC_SINGLE={lbrace:123,rbrace:125,lparenth:40,rparenth:41,lbracket:91,rbracket:93,dot:46,semicolon:59,comma:44,less:60,more:62,plus:43,minus:45,percent:37,ampersand:38,vertical:124,caret:94,excl:33,tilde:126,quest:63,colon:58,assign:61,asterisk:42,slash:47,backslash:92,dollar:36,exp:101,expb:69,apostrophe:39,qmark:34,zero:48,b:98,f:102,n:110,r:114,t:116,v:118,x:120,u:117,lf:10},u.UNICODE_UNCOMMON_THRESHOLD=170,u.UNICODE_CONTINUE_COMMON={8204:t,8205:t,36:t,92:t,48:t,49:t,50:t,51:t,52:t,53:t,54:t,55:t,56:t,57:t,65:t,66:t,67:t,68:t,69:t,70:t,71:t,72:t,73:t,74:t,75:t,76:t,77:t,78:t,79:t,80:t,81:t,82:t,83:t,84:t,85:t,86:t,87:t,88:t,89:t,90:t,95:t,97:t,98:t,99:t,100:t,101:t,102:t,103:t,104:t,105:t,106:t,107:t,108:t,109:t,110:t,111:t,112:t,113:t,114:t,115:t,116:t,117:t,118:t,119:t,120:t,121:t,122:t},u.UNICODE_CONTINUE_UNCOMMON=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u0300-\u036F\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u0483-\u0486\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05B9\u05BB-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u0615\u0621-\u063A\u0640-\u065E\u0660-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u076D\u0780-\u07B1\u0901-\u0939\u093C-\u094D\u0950-\u0954\u0958-\u0963\u0966-\u096F\u097D\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A59-\u0A5C\u0A5E\u0A66-\u0A74\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C60\u0C61\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D66-\u0D6F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC\u0EDD\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6A\u0F71-\u0F84\u0F86-\u0F8B\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1021\u1023-\u1027\u1029\u102A\u102C-\u1032\u1036-\u1039\u1040-\u1049\u1050-\u1059\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18A9\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19A9\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1D00-\u1DC3\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u2094\u20D0-\u20DC\u20E1\u20E5-\u20EB\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2160-\u2183\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA827\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE23\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDF00-\uDF1E\uDF30-\uDF4A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCE-\uDFFF]|[\uD840-\uD868][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,u.UNICODE_START_COMMON={36:t,92:t,95:t,65:t,66:t,67:t,68:t,69:t,70:t,71:t,72:t,73:t,74:t,75:t,76:t,77:t,78:t,79:t,80:t,81:t,82:t,83:t,84:t,85:t,86:t,87:t,88:t,89:t,90:t,97:t,98:t,99:t,100:t,101:t,102:t,103:t,104:t,105:t,106:t,107:t,108:t,109:t,110:t,111:t,112:t,113:t,114:t,115:t,116:t,117:t,118:t,119:t,120:t,121:t,122:t},u.UNICODE_START_UNCOMMON=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950\u0958-\u0961\u097D\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021\u1023-\u1027\u1029\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2160-\u2183\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDF00-\uDF1E\uDF30-\uDF4A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFC9]|[\uD840-\uD868][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6]|\uD87E[\uDC00-\uDE1D]/,u}();u.TokenDefinitions=e}(t=u.lexical||(u.lexical={}))}(t=u.frontend||(u.frontend={}))}(t||(t={}));var t;!function(t){var e;!function(t){var e;!function(e){var r={};u.each("0123456789ABCDEFabcdef",function(u){r[t.utilities.CharPoints.codePointAt(u,0)]=!0});var n={};u.each("0123456789",function(u){n[t.utilities.CharPoints.codePointAt(u,0)]=!0});var i=function(){function u(){}return u.isHexDigit=function(u){return r[u]},u.isDigit=function(u){return n[u]},u.isKeyword=function(u){return e.TokenDefinitions.KW[u]},u.isLineTerminator=function(u){return e.TokenDefinitions.LT[u]},u.isIdentifierStart=function(t){return u.isSimpleUnicodeStart(t)||u.isComplexUnicodeStart(t)},u.isIdentifierPart=function(t){return u.isSimpleUnicodeContinue(t)||u.isComplexUnicodeContinue(t)},u.isSimpleUnicodeContinue=function(u){return e.TokenDefinitions.UNICODE_CONTINUE_COMMON[u]},u.isComplexUnicodeContinue=function(u){return u>e.TokenDefinitions.UNICODE_UNCOMMON_THRESHOLD&&e.TokenDefinitions.UNICODE_CONTINUE_UNCOMMON.test(t.utilities.CharPoints.fromCodePoint(u))},u.isSimpleUnicodeStart=function(u){return e.TokenDefinitions.UNICODE_START_COMMON[u]},u.isComplexUnicodeStart=function(u){return u>e.TokenDefinitions.UNICODE_UNCOMMON_THRESHOLD&&e.TokenDefinitions.UNICODE_START_UNCOMMON.test(t.utilities.CharPoints.fromCodePoint(u))},u.isPunctuationStart=function(u){return e.TokenDefinitions.PNC_SINGLE[u]},u}();e.Identifyers=i}(e=t.lexical||(t.lexical={}))}(e=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(t){var e;!function(t){var e;!function(e){var r={identifier:"stateIdentifier",punctuation:"statePunctuation",multiComment:"stateMultiComment",singleComment:"stateSingleComment",divOrComment:"stateDivOrComment",dotOrNumber:"stateDotOrNumber",error:"stateError",finish:"stateFinish",init:"stateInit"},n={keyword:"keyword",identifier:"identifier",literal:"literal",punctuation:"punctuation",comment:"comment"},i=e.TokenDefinitions.PNC_SINGLE,o=function(){function o(u,t){this.charStream=u,this.exceptionHandler=t,this.lineno=0,this.currLineCursor=0,o.initiateCharecterLookupOnce()}return o.initiateCharecterLookupOnce=function(){if(!o.CharecterLookup){var n=o.CharecterLookup={};u.each(e.TokenDefinitions.WS,function(u,t){return n[t]=o.prototype.stateWhiteSpace}),u.each(e.TokenDefinitions.LT,function(u,t){return n[t]=o.prototype.stateLineTerminator}),n[i.qmark]=o.genStateString(i.qmark),n[i.apostrophe]=o.genStateString(i.apostrophe),u.each("0123456789",function(u){n[t.utilities.CharPoints.codePointAt(u,0)]=o.prototype.stateNumber}),n[i.lbrace]=o.prototype.statePunctuationSingle,n[i.rbrace]=o.prototype.statePunctuationSingle,n[i.lparenth]=o.prototype.statePunctuationSingle,n[i.rparenth]=o.prototype.statePunctuationSingle,n[i.lbracket]=o.prototype.statePunctuationSingle,n[i.rbracket]=o.prototype.statePunctuationSingle,n[i.dot]=function(){return r.dotOrNumber},n[i.semicolon]=o.prototype.statePunctuationSingle,n[i.comma]=o.prototype.statePunctuationSingle,n[i.less]=o.genPunctuationScanner([[i.less],[i.assign],[i.less,i.less],[i.less,i.assign]]),n[i.more]=o.genPunctuationScanner([[i.more],[i.assign],[i.more,i.more],[i.more,i.assign],[i.more,i.more,i.assign]]),n[i.excl]=o.genPunctuationScanner([[i.assign],[i.assign,i.assign]]),n[i.minus]=o.genPunctuationScanner([[i.minus],[i.assign]]),n[i.plus]=o.genPunctuationScanner([[i.plus],[i.assign]]),n[i.percent]=o.genPunctuationScanner([[i.assign]]),n[i.ampersand]=o.genPunctuationScanner([[i.ampersand],[i.assign]]),n[i.vertical]=o.genPunctuationScanner([[i.vertical],[i.assign]]),n[i.vertical]=o.genPunctuationScanner([[i.assign]]),n[i.tilde]=o.prototype.statePunctuationSingle,n[i.quest]=o.prototype.statePunctuationSingle,n[i.colon]=o.prototype.statePunctuationSingle,n[i.assign]=o.genPunctuationScanner([[i.assign],[i.assign,i.assign]]),n[i.asterisk]=o.genPunctuationScanner([[i.assign]]),n[i.slash]=function(){return r.divOrComment},n[i.backslash]=function(){return r.identifier}}},o.prototype.getNextToken=function(){for(var u=this.stateInit();u;)u=this[u].call(this);return this.token},o.prototype.stateFinish=function(){},o.prototype.stateError=function(){},o.prototype.stateInit=function(){this.token=void 0,this.startLineno=this.lineno,this.relativeStartCursor=this.charStream.getCursor()-this.currLineCursor,this.absoluteStartCursor=this.charStream.getCursor();var u,n=this.charStream.getNextChar();if(e.Identifyers.isIdentifierStart(n))this.charStream.bwdCursor(),u=r.identifier;else{var i=o.CharecterLookup[n];i?(this.charStream.bwdCursor(),u=i.call(this)):void 0!==n&&(this.exceptionHandler.addException('unexpected token "'+t.utilities.CharPoints.fromCodePoint(n)+'"',this.lineno,this.charStream.getCursor()),u=r.error)}return u},o.prototype.stateIdentifier=function(){var u=t.utilities.CharPoints.createStringFromCharPointGenerator(),i=this.charStream.getNextChar();if(!this.scanUnicodeEscapeSequence(u,i))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),r.error;for(;;){var o=this.charStream.getNextChar();if(!e.Identifyers.isIdentifierPart(o)){void 0!==o&&this.charStream.bwdCursor();break}if(!this.scanUnicodeEscapeSequence(u,o))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),r.error}var D,a,s=u.getString();if(e.Identifyers.isKeyword(s))D=n.keyword;else switch(s){case"null":D=n.literal,a="null",s=null;break;case"true":D=n.literal,a="boolean",s=!0;break;case"false":D=n.literal,a="boolean",s=!1;break;default:D=n.identifier}return this.token=this.createToken(D,s,a),r.finish},o.genStateString=function(u){return function(){this.charStream.getNextChar();for(var o=t.utilities.CharPoints.createStringFromCharPointGenerator();;){var D=this.charStream.getNextChar();if(D===u)break;if(D===i.backslash)switch(D=this.charStream.getNextChar()){case i.b:o.addCharPoint(8);break;case i.f:o.addCharPoint(12);break;case i.n:o.addCharPoint(10);break;case i.r:o.addCharPoint(13);break;case i.t:o.addCharPoint(9);break;case i.v:o.addCharPoint(11);break;case i.x:if(!this.handleScanHexDigits(2,o))return r.error;break;case i.u:if(!this.handleScanHexDigits(4,o))return r.error;break;default:e.Identifyers.isLineTerminator(D)&&(o.addCharPoint(D),this.handleNewLine())}else{if(void 0===D)return this.exceptionHandler.addException("unclosed string",this.lineno,this.charStream.getCursor()),r.error;o.addCharPoint(D)}}return this.token=this.createToken(n.literal,o.getString(),"string"),r.finish}},o.prototype.stateNumber=function(){var u=this.scanDigits(),t=u.length;if(this.charStream.match(i.dot)){var e=this.scanDecimal();void 0!==e&&(u=u.concat(e))}return this.scanExponensialAndCreateNumber(u,t)},o.prototype.stateDotOrNumber=function(){this.charStream.fwdCursor();var u=this.scanDecimal();return void 0!==u?this.scanExponensialAndCreateNumber(u,0):(this.charStream.bwdCursor(),this.statePunctuationSingle())},o.prototype.stateDivOrComment=function(){this.charStream.fwdCursor();var u=this.charStream.getNextChar();switch(u){case i.slash:return r.singleComment;case i.asterisk:return r.multiComment;case i.assign:break;default:this.charStream.bwdCursor()}return this.charStream.bwdCursor(),this.statePunctuationSingle()},o.prototype.statePunctuationSingle=function(){return this.charStream.fwdCursor(),this.token=this.createTokenFromPos(n.punctuation),r.finish},o.prototype.stateWhiteSpace=function(){return this.charStream.fwdCursor(),r.init},o.prototype.stateLineTerminator=function(){return this.charStream.fwdCursor(),this.charStream.matchComplex(function(u){return u===i.lf||void 0===u}),this.handleNewLine(),r.init},o.prototype.stateSingleComment=function(){do{var u=this.charStream.getNextChar();if(e.Identifyers.isLineTerminator(u)){this.handleNewLine();break}}while(void 0!==u);return this.token=this.createTokenFromPos(n.comment),r.finish},o.prototype.stateMultiComment=function(){for(;;){var u=this.charStream.getNextChar();if(u===i.asterisk&&this.charStream.match(i.slash))break;if(void 0===u)return this.exceptionHandler.addException("unclosed comment",this.lineno,this.charStream.getCursor()),r.error;e.Identifyers.isLineTerminator(u)&&this.handleNewLine()}return this.token=this.createTokenFromPos(n.comment),r.finish},o.prototype.scanUnicodeEscapeSequence=function(u,t){if(t===i.backslash){if(t=this.charStream.getNextChar(),t!==i.u)return!1;var e=this.scanHexDigits(4);if(void 0===e)return!1;u.addCharPoint(e)}else u.addCharPoint(t);return!0},o.prototype.scanExponensialAndCreateNumber=function(u,t){var i=this.scanExponential();if(void 0===i)return r.error;if(this.charStream.matchComplex(function(u){return e.Identifyers.isIdentifierPart(u)}))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),r.error;var o=this.createNumber(u,t,i);return this.token=this.createToken(n.literal,o,"number"),r.finish},o.prototype.scanDigits=function(){for(var u,r=[],n=this.charStream.getCursor();;){if(u=this.charStream.getNextChar(),!e.Identifyers.isDigit(u))break;var i=t.utilities.CharPoints.getDigitFromCharPoint(u);r.push(i)}var o;return void 0===u?o=this.charStream.getCursor():(this.charStream.bwdCursor(),o=this.charStream.getCursor()),o-n!==0?r:void 0},o.prototype.scanDecimal=function(){var u=this.charStream.getCursor(),t=this.scanDigits(),e=this.charStream.getCursor(),r=e-u;return 0!==r?t:void 0},o.prototype.scanExponential=function(){var u=this.charStream.getNextChar();if(u===i.exp||u===i.expb){u=this.charStream.getNextChar();var t;u===i.minus?t=!0:u!==i.plus&&this.charStream.bwdCursor();var e=this.scanDigits();if(void 0===e)return void this.exceptionHandler.addException("exponential should postfixed by numbers",this.lineno,this.charStream.getCursor());var r=this.createNumber(e,e.length,0);return t?-r:r}return void 0!==u&&this.charStream.bwdCursor(),0},o.prototype.scanHexDigits=function(u){if(this.scanHexDigitsTimes(u)){var t=this.charStream.getCursor(),e=this.charStream.tokenize(t-u);return parseInt(e,16)}},o.prototype.scanHexDigitsTimes=function(u){var t=u;do{var r=this.charStream.getNextChar();if(!e.Identifyers.isHexDigit(r))return this.charStream.bwdCursorRange(t-(u-1)),!1}while(--u);return!0},o.genPunctuationScanner=function(t){for(var e=u.last(t).length,i=u.map(new Array(e),function(){return new Object}),o=e-1;-1!==o;--o)for(var D=t.length-1;-1!==D;--D){var a=t[D][o];if(!a)break;i[o][a]=!0}return function(){this.charStream.fwdCursor();for(var u=0;e>u;++u){var t=this.charStream.getNextChar();if(!i[u][t]){void 0!==t&&this.charStream.bwdCursor();break}}return this.token=this.createTokenFromPos(n.punctuation,this.startPos),r.finish}},o.prototype.createPos=function(){return{start:{line:this.startLineno,column:this.relativeStartCursor},end:{line:this.lineno,column:this.charStream.getCursor()-this.currLineCursor}}},o.prototype.createTokenFromPos=function(u,t){return{type:u,value:this.charStream.tokenize(this.absoluteStartCursor),subType:t,loc:this.createPos()}},o.prototype.createToken=function(u,t,e){return{type:u,value:t,subType:e,loc:this.createPos()}},o.prototype.genIntegerFromArray=function(u,t,e){for(var r=0,n=t;e>n;++n)r=10*r+u[n];return r},o.prototype.createNumber=function(u,t,e){var r=t+e;if(0>r){var n=this.genIntegerFromArray(u,0,u.length);return n/Math.pow(10,t-e)}if(r>u.length){var n=this.genIntegerFromArray(u,0,u.length);return n*Math.pow(10,r-u.length)}var n=this.genIntegerFromArray(u,0,r),i=this.genIntegerFromArray(u,r,u.length);return n+i/Math.pow(10,u.length-r)},o.prototype.handleScanHexDigits=function(u,t){var e=this.scanHexDigits(u);return void 0===e?(this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),!1):(t.addCharPoint(e),!0)},o.prototype.handleNewLine=function(){++this.lineno,this.currLineCursor=this.charStream.getCursor()},o}();e.Lexer=o}(e=t.lexical||(t.lexical={}))}(e=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(){this.exceptions=[]}return t.prototype.addException=function(u,t,e){var r={pos:{col:e,line:t},msg:u};this.exceptions.push(r)},t.prototype.hasExceptions=function(){return!u.isEmpty(this.exceptions)},t.prototype.clear=function(){this.exceptions.length=0},t.prototype.getExceptions=function(){return this.exceptions},t}();t.ExceptionHandler=e}(e=t.lexical||(t.lexical={}))}(e=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(u){var t;!function(u){var t;!function(t){var e=function(){function t(u){this.src=u,this.cursor=0}return t.prototype.getNextChar=function(){return this.hasNext()?u.utilities.CharPoints.codePointAt(this.src,this.cursor++):void 0},t.prototype.getChar=function(){return u.utilities.CharPoints.codePointAt(this.src,this.cursor)},t.prototype.getCursor=function(){return this.cursor},t.prototype.bwdCursor=function(){--this.cursor},t.prototype.fwdCursor=function(){this.hasNext()&&++this.cursor},t.prototype.bwdCursorRange=function(u){this.cursor=Math.max(this.cursor-u,0)},t.prototype.tokenize=function(u){return this.src.substring(u,this.cursor)},t.prototype.match=function(u){var t=this.getNextChar();return t===u?!0:(void 0!==t&&this.bwdCursor(),!1)},t.prototype.matchComplex=function(u){var t=this.getNextChar();return u(t)?!0:(void 0!==t&&this.bwdCursor(),!1)},t.prototype.isEof=function(){return this.cursor>=this.src.length},t.prototype.hasNext=function(){return this.cursor<this.src.length},t}();t.CharacterStream=e}(t=u.lexical||(u.lexical={}))}(t=u.frontend||(u.frontend={}))}(t||(t={}));var t;return!function(u){var t;!function(u){var t;!function(t){function e(t){for(var e=new u.lexical.CharacterStream(t),r=new u.lexical.ExceptionHandler,n=new u.lexical.Lexer(e,r),i=[];;){var o=n.getNextToken();if(!o)break;i.push(o)}var D={tokens:i};return r.hasExceptions()&&(D.exceptions=r.getExceptions()),D}t.tokenize=e}(t=u.api||(u.api={}))}(t=u.frontend||(u.frontend={}))}(t||(t={})),t});