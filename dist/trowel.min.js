!function(e,t){"function"==typeof define&&define.amd?define(["underscore"],t):"object"==typeof exports?module.exports=t(require("underscore")):e.trowel=e.trl=t(e._)}(this,function(e){if(!e||!e.VERSION)throw new Error("Trowel's JavaScript requires underscore");var t;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.keyword=1]="keyword",e[e.identifier=2]="identifier",e[e.literal=3]="literal",e[e.punctuation=4]="punctuation",e[e.comment=5]="comment",e[e.eof=6]="eof",e[e.error=7]="error"}(e.TokenType||(e.TokenType={}));e.TokenType;!function(e){e[e.string=1]="string",e[e.number=2]="number",e[e["null"]=3]="null",e[e["boolean"]=4]="boolean"}(e.LiteralSubType||(e.LiteralSubType={}));e.LiteralSubType}(t=e.lexical||(e.lexical={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.createStringFromCharPointGenerator=function(){var t=[];return{addCharPoint:function(u){t.push(e.fromCodePoint(u))},getString:function(){return t.join("")}}},e.getDigitFromCharPoint=function(t){return t-e.ZERO_CHAR_CODE},e.codePointAt=function(e,t){return e.codePointAt(t)},e.fromCodePoint=function(e){return String.fromCodePoint(e)},e.ZERO_CHAR_CODE="0".charCodeAt(0),e}();e.CharPoints=t}(t=e.utilities||(e.utilities={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(e){var t;!function(e){var t;!function(e){var t=!0,u=function(){function e(){}return e.WS={9:t,11:t,12:t,32:t,160:t,65279:t},e.LT={10:t,13:t,8232:t,514:t},e.KW={"break":t,"do":t,"instanceof":t,"typeof":t,"case":t,"else":t,"new":t,"var":t,"catch":t,"finally":t,"return":t,"void":t,"continue":t,"for":t,"switch":t,"while":t,"debugger":t,"function":t,"this":t,"with":t,"default":t,"if":t,"throw":t,"delete":t,"in":t,"try":t,"class":t,"enum":t,"extends":t,"super":t,"const":t,"export":t,"import":t,"implements":t,let:t,"private":t,"public":t,"interface":t,"package":t,"protected":t,"static":t,"yield":t},e.LIT={"null":t,"true":t,"false":t},e.PNC_SINGLE={lbrace:123,rbrace:125,lparenth:40,rparenth:41,lbracket:91,rbracket:93,dot:46,semicolon:59,comma:44,less:60,more:62,plus:43,minus:45,percent:37,ampersand:38,vertical:124,caret:94,excl:33,tilde:126,quest:63,colon:58,assign:61,asterisk:42,slash:47,backslash:92,dollar:36,exp:101,expb:69,apostrophe:39,qmark:34,zero:48,b:98,f:102,n:110,r:114,t:116,v:118,x:120,u:117,lf:10,cr:13},e.UNICODE_UNCOMMON_THRESHOLD=170,e.UNICODE_CONTINUE_COMMON={8204:t,8205:t,36:t,92:t,48:t,49:t,50:t,51:t,52:t,53:t,54:t,55:t,56:t,57:t,65:t,66:t,67:t,68:t,69:t,70:t,71:t,72:t,73:t,74:t,75:t,76:t,77:t,78:t,79:t,80:t,81:t,82:t,83:t,84:t,85:t,86:t,87:t,88:t,89:t,90:t,95:t,97:t,98:t,99:t,100:t,101:t,102:t,103:t,104:t,105:t,106:t,107:t,108:t,109:t,110:t,111:t,112:t,113:t,114:t,115:t,116:t,117:t,118:t,119:t,120:t,121:t,122:t},e.UNICODE_CONTINUE_UNCOMMON=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u0300-\u036F\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u0483-\u0486\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05B9\u05BB-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u0615\u0621-\u063A\u0640-\u065E\u0660-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u076D\u0780-\u07B1\u0901-\u0939\u093C-\u094D\u0950-\u0954\u0958-\u0963\u0966-\u096F\u097D\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A59-\u0A5C\u0A5E\u0A66-\u0A74\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B43\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C60\u0C61\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D60\u0D61\u0D66-\u0D6F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC\u0EDD\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6A\u0F71-\u0F84\u0F86-\u0F8B\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1021\u1023-\u1027\u1029\u102A\u102C-\u1032\u1036-\u1039\u1040-\u1049\u1050-\u1059\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18A9\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19A9\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1D00-\u1DC3\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u2094\u20D0-\u20DC\u20E1\u20E5-\u20EB\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2160-\u2183\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA827\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE23\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDF00-\uDF1E\uDF30-\uDF4A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCE-\uDFFF]|[\uD840-\uD868][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,e.UNICODE_START_COMMON={36:t,92:t,95:t,65:t,66:t,67:t,68:t,69:t,70:t,71:t,72:t,73:t,74:t,75:t,76:t,77:t,78:t,79:t,80:t,81:t,82:t,83:t,84:t,85:t,86:t,87:t,88:t,89:t,90:t,97:t,98:t,99:t,100:t,101:t,102:t,103:t,104:t,105:t,106:t,107:t,108:t,109:t,110:t,111:t,112:t,113:t,114:t,115:t,116:t,117:t,118:t,119:t,120:t,121:t,122:t},e.UNICODE_START_UNCOMMON=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950\u0958-\u0961\u097D\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021\u1023-\u1027\u1029\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2160-\u2183\u2C00-\u2C2E\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FBB\uA000-\uA48C\uA800\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDF00-\uDF1E\uDF30-\uDF4A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFC9]|[\uD840-\uD868][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6]|\uD87E[\uDC00-\uDE1D]/,e}();e.TokenDefinitions=u}(t=e.lexical||(e.lexical={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(t){var u;!function(t){var u;!function(u){var r={};e.each("0123456789ABCDEFabcdef",function(e){r[t.utilities.CharPoints.codePointAt(e,0)]=!0});var n={};e.each("0123456789",function(e){n[t.utilities.CharPoints.codePointAt(e,0)]=!0});var i=function(){function e(){}return e.isHexDigit=function(e){return r[e]},e.isDigit=function(e){return n[e]},e.isKeyword=function(e){return u.TokenDefinitions.KW[e]},e.isLineTerminator=function(e){return u.TokenDefinitions.LT[e]},e.isIdentifierStart=function(t){return e.isSimpleUnicodeStart(t)||e.isComplexUnicodeStart(t)},e.isIdentifierPart=function(t){return e.isSimpleUnicodeContinue(t)||e.isComplexUnicodeContinue(t)},e.isSimpleUnicodeContinue=function(e){return u.TokenDefinitions.UNICODE_CONTINUE_COMMON[e]},e.isComplexUnicodeContinue=function(e){return e>u.TokenDefinitions.UNICODE_UNCOMMON_THRESHOLD&&u.TokenDefinitions.UNICODE_CONTINUE_UNCOMMON.test(t.utilities.CharPoints.fromCodePoint(e))},e.isSimpleUnicodeStart=function(e){return u.TokenDefinitions.UNICODE_START_COMMON[e]},e.isComplexUnicodeStart=function(e){return e>u.TokenDefinitions.UNICODE_UNCOMMON_THRESHOLD&&u.TokenDefinitions.UNICODE_START_UNCOMMON.test(t.utilities.CharPoints.fromCodePoint(e))},e.isPunctuationStart=function(e){return u.TokenDefinitions.PNC_SINGLE[e]},e}();u.Identifyers=i}(u=t.lexical||(t.lexical={}))}(u=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(t){var u;!function(t){var u;!function(u){function r(e){switch(e){case u.TokenType.keyword:return o.keyword;case u.TokenType.identifier:return o.identifier;case u.TokenType.literal:return o.literal;case u.TokenType.punctuation:return o.punctuation;case u.TokenType.comment:return o.comment;case u.TokenType.eof:return o.eof;case u.TokenType.error:return o.error}throw new Error("Unexpected token type")}function n(e){switch(e){case u.LiteralSubType.string:return a.string;case u.LiteralSubType.number:return a.number;case u.LiteralSubType["null"]:return a["null"];case u.LiteralSubType["boolean"]:return a["boolean"]}throw new Error("Unexpected token type")}var i={identifier:"stateIdentifier",punctuation:"statePunctuation",multiComment:"stateMultiComment",singleComment:"stateSingleComment",divOrComment:"stateDivOrComment",dotOrNumber:"stateDotOrNumber",error:"stateError",finish:"stateFinish",init:"stateInit"},o={keyword:"keyword",identifier:"identifier",literal:"literal",punctuation:"punctuation",comment:"comment",eof:"eof",error:"error"},a={string:"string",number:"number","null":"null","boolean":"boolean"},s=u.TokenDefinitions.PNC_SINGLE,c=function(){function a(t,u,r){this.charStream=t,this.exceptionHandler=u,this.options=r,this.options=e.defaults(e.clone(r||{}),a.defaultLexerOptions),this.lineno=1,this.currLineCursor=0,this.comments=[],a.initiateCharecterLookupOnce()}return a.initiateCharecterLookupOnce=function(){if(!a.CharecterLookup){var r=a.CharecterLookup={};e.each(u.TokenDefinitions.WS,function(e,t){return r[t]=a.prototype.stateWhiteSpace}),e.each(u.TokenDefinitions.LT,function(e,t){return r[t]=a.prototype.stateLineTerminator}),r[s.qmark]=a.genStateString(s.qmark),r[s.apostrophe]=a.genStateString(s.apostrophe),e.each("0123456789",function(e){r[t.utilities.CharPoints.codePointAt(e,0)]=a.prototype.stateNumber}),r[s.lbrace]=a.prototype.statePunctuationSingle,r[s.rbrace]=a.prototype.statePunctuationSingle,r[s.lparenth]=a.prototype.statePunctuationSingle,r[s.rparenth]=a.prototype.statePunctuationSingle,r[s.lbracket]=a.prototype.statePunctuationSingle,r[s.rbracket]=a.prototype.statePunctuationSingle,r[s.dot]=function(){return i.dotOrNumber},r[s.semicolon]=a.prototype.statePunctuationSingle,r[s.comma]=a.prototype.statePunctuationSingle,r[s.less]=a.genPunctuationScanner([[s.less],[s.assign],[s.less,s.less],[s.less,s.assign]]),r[s.more]=a.genPunctuationScanner([[s.more],[s.assign],[s.more,s.more],[s.more,s.assign],[s.more,s.more,s.assign]]),r[s.excl]=a.genPunctuationScanner([[s.assign],[s.assign,s.assign]]),r[s.minus]=a.genPunctuationScanner([[s.minus],[s.assign]]),r[s.plus]=a.genPunctuationScanner([[s.plus],[s.assign]]),r[s.percent]=a.genPunctuationScanner([[s.assign]]),r[s.ampersand]=a.genPunctuationScanner([[s.ampersand],[s.assign]]),r[s.vertical]=a.genPunctuationScanner([[s.vertical],[s.assign]]),r[s.caret]=a.genPunctuationScanner([[s.assign]]),r[s.tilde]=a.prototype.statePunctuationSingle,r[s.quest]=a.prototype.statePunctuationSingle,r[s.colon]=a.prototype.statePunctuationSingle,r[s.assign]=a.genPunctuationScanner([[s.assign],[s.assign,s.assign]]),r[s.asterisk]=a.genPunctuationScanner([[s.assign]]),r[s.slash]=function(){return i.divOrComment},r[s.backslash]=function(){return i.identifier}}},a.prototype.isError=function(e){return this.options.readableTokensMode?e.type===o.error:e.type===u.TokenType.error},a.prototype.isEof=function(e){return this.options.readableTokensMode?e.type===o.eof:e.type===u.TokenType.eof},a.prototype.isComment=function(e){return this.options.readableTokensMode?e.type===o.comment:e.type===u.TokenType.comment},a.prototype.isLiteral=function(e){return this.options.readableTokensMode?e.type===o.literal:e.type===u.TokenType.literal},a.prototype.isPunctuation=function(e){return this.options.readableTokensMode?e.type===o.punctuation:e.type===u.TokenType.punctuation},a.prototype.isKeyword=function(e){return this.options.readableTokensMode?e.type===o.keyword:e.type===u.TokenType.keyword},a.prototype.isIdentifier=function(e){return this.options.readableTokensMode?e.type===o.identifier:e.type===u.TokenType.identifier},a.prototype.isPunctuationValue=function(e,t){return this.isPunctuation(e)&&e.value===t},a.prototype.isKeywordValue=function(e,t){return this.isKeyword(e)&&e.value===t},a.prototype.isIdentifierValue=function(e,t){return this.isIdentifier(e)&&e.value===t},a.prototype.matchPunctuation=function(e){var t=this.lookAheadNextToken();return this.isPunctuationValue(t,e)?(this.nextToken(),!0):!1},a.prototype.matchKeyword=function(e){var t=this.lookAheadNextToken();return this.isKeywordValue(t,e)?(this.nextToken(),!0):!1},a.prototype.nextToken=function(){var e=this.lookAheadToken;if(e)return this.lookAheadToken=void 0,this.currentToken=e;var t=this.beginStates();if(this.isComment(t))if(this.options.includeCommentsAsNormalTokens)this.comments.push(t);else do this.comments.push(t),t=this.beginStates();while(this.isComment(t));return t},a.prototype.beginStates=function(){for(var e=this.stateInit();e;)e=this[e].call(this);return this.token||(this.token=this.createToken(u.TokenType.error,void 0)),this.options.readableTokensMode&&this.token&&(this.token.type=r(this.token.type),this.token.subType&&(this.token.subType=n(this.token.subType))),this.currentToken=this.token},a.prototype.latestToken=function(){return this.currentToken},a.prototype.lookAheadNextToken=function(){var e=this.currentToken;return this.lookAheadToken=this.nextToken(),this.currentToken=e,this.lookAheadToken},a.prototype.hasNext=function(){var e=this.lookAheadNextToken();return!this.isEof(e)&&!this.isError(e)},a.prototype.getComments=function(){return this.comments},a.prototype.getCurrentCursorPos=function(){return{line:this.lineno,column:this.charStream.getCursor()-this.currLineCursor}},a.prototype.stateFinish=function(){},a.prototype.stateError=function(){},a.prototype.stateInit=function(){if(this.token=void 0,this.startLineno=this.lineno,this.relativeStartCursor=this.charStream.getCursor()-this.currLineCursor,this.absoluteStartCursor=this.charStream.getCursor(),this.charStream.isEof())return this.token=this.createToken(u.TokenType.eof,void 0),i.finish;var e,r=this.charStream.getNextChar();if(u.Identifyers.isIdentifierStart(r))this.charStream.bwdCursor(),e=i.identifier;else{var n=a.CharecterLookup[r];n?(this.charStream.bwdCursor(),e=n.call(this)):void 0!==r&&(this.exceptionHandler.addException('unexpected token "'+t.utilities.CharPoints.fromCodePoint(r)+'"',this.lineno,this.charStream.getCursor()),e=i.error)}return e},a.prototype.stateIdentifier=function(){var e=t.utilities.CharPoints.createStringFromCharPointGenerator(),r=this.charStream.getNextChar();if(!this.scanUnicodeEscapeSequence(e,r))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),i.error;for(;;){var n=this.charStream.getNextChar();if(!u.Identifyers.isIdentifierPart(n)){void 0!==n&&this.charStream.bwdCursor();break}if(!this.scanUnicodeEscapeSequence(e,n))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),i.error}var o,a,s=e.getString();if(u.Identifyers.isKeyword(s))o=u.TokenType.keyword;else switch(s){case"null":o=u.TokenType.literal,a=u.LiteralSubType["null"],s=null;break;case"true":o=u.TokenType.literal,a=u.LiteralSubType["boolean"],s=!0;break;case"false":o=u.TokenType.literal,a=u.LiteralSubType["boolean"],s=!1;break;default:o=u.TokenType.identifier}return this.token=this.createToken(o,s,a),i.finish},a.genStateString=function(e){return function(){this.charStream.getNextChar();for(var r=t.utilities.CharPoints.createStringFromCharPointGenerator();;){var n=this.charStream.getNextChar();if(n===e)break;if(n===s.backslash)switch(n=this.charStream.getNextChar()){case s.b:r.addCharPoint(8);break;case s.f:r.addCharPoint(12);break;case s.n:r.addCharPoint(10);break;case s.r:r.addCharPoint(13);break;case s.t:r.addCharPoint(9);break;case s.v:r.addCharPoint(11);break;case s.x:if(!this.handleScanHexDigits(2,r))return i.error;break;case s.u:if(!this.handleScanHexDigits(4,r))return i.error;break;default:u.Identifyers.isLineTerminator(n)&&(r.addCharPoint(n),this.handleNewLine())}else{if(void 0===n)return this.exceptionHandler.addException("unclosed string",this.lineno,this.charStream.getCursor()),i.error;r.addCharPoint(n)}}return this.token=this.createToken(u.TokenType.literal,r.getString(),u.LiteralSubType.string),i.finish}},a.prototype.stateNumber=function(){var e=this.scanDigits(),t=e.length;if(this.charStream.match(s.dot)){var u=this.scanDecimal();void 0!==u&&(e=e.concat(u))}return this.scanExponensialAndCreateNumber(e,t)},a.prototype.stateDotOrNumber=function(){this.charStream.fwdCursor();var e=this.scanDecimal();return void 0!==e?this.scanExponensialAndCreateNumber(e,0):(this.charStream.bwdCursor(),this.statePunctuationSingle())},a.prototype.stateDivOrComment=function(){this.charStream.fwdCursor();var e=this.charStream.getNextChar();switch(e){case s.slash:return i.singleComment;case s.asterisk:return i.multiComment;case s.assign:break;default:this.charStream.bwdCursor()}return this.charStream.bwdCursor(),this.statePunctuationSingle()},a.prototype.statePunctuationSingle=function(){return this.charStream.fwdCursor(),this.token=this.createTokenFromPos(u.TokenType.punctuation),i.finish},a.prototype.stateWhiteSpace=function(){return this.charStream.fwdCursor(),i.init},a.prototype.stateLineTerminator=function(){var e=this.charStream.getNextChar();return this.charStream.matchComplex(function(t){return e===s.cr&&t===s.lf||void 0===t}),this.handleNewLine(),i.init},a.prototype.stateSingleComment=function(){do{var e=this.charStream.getNextChar();if(u.Identifyers.isLineTerminator(e)){this.handleNewLine();break}}while(void 0!==e);return this.token=this.createTokenFromPos(u.TokenType.comment),i.finish},a.prototype.stateMultiComment=function(){for(;;){var e=this.charStream.getNextChar();if(e===s.asterisk&&this.charStream.match(s.slash))break;if(void 0===e)return this.exceptionHandler.addException("unclosed comment",this.lineno,this.charStream.getCursor()),i.error;u.Identifyers.isLineTerminator(e)&&this.handleNewLine()}return this.token=this.createTokenFromPos(u.TokenType.comment),i.finish},a.prototype.scanUnicodeEscapeSequence=function(e,t){if(t===s.backslash){if(t=this.charStream.getNextChar(),t!==s.u)return!1;var u=this.scanHexDigits(4);if(void 0===u)return!1;e.addCharPoint(u)}else e.addCharPoint(t);return!0},a.prototype.scanExponensialAndCreateNumber=function(e,t){var r=this.scanExponential();if(void 0===r)return i.error;if(this.charStream.matchComplex(function(e){return u.Identifyers.isIdentifierPart(e)}))return this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),i.error;var n=this.createNumber(e,t,r);return this.token=this.createToken(u.TokenType.literal,n,u.LiteralSubType.number),i.finish},a.prototype.scanDigits=function(){for(var e,r=[],n=this.charStream.getCursor();;){if(e=this.charStream.getNextChar(),!u.Identifyers.isDigit(e))break;var i=t.utilities.CharPoints.getDigitFromCharPoint(e);r.push(i)}var o;return void 0===e?o=this.charStream.getCursor():(this.charStream.bwdCursor(),o=this.charStream.getCursor()),o-n!==0?r:void 0},a.prototype.scanDecimal=function(){var e=this.charStream.getCursor(),t=this.scanDigits(),u=this.charStream.getCursor(),r=u-e;return 0!==r?t:void 0},a.prototype.scanExponential=function(){var e=this.charStream.getNextChar();if(e===s.exp||e===s.expb){e=this.charStream.getNextChar();var t;e===s.minus?t=!0:e!==s.plus&&this.charStream.bwdCursor();var u=this.scanDigits();if(void 0===u)return void this.exceptionHandler.addException("exponential should postfixed by numbers",this.lineno,this.charStream.getCursor());var r=this.createNumber(u,u.length,0);return t?-r:r}return void 0!==e&&this.charStream.bwdCursor(),0},a.prototype.scanHexDigits=function(e){if(this.scanHexDigitsTimes(e)){var t=this.charStream.getCursor(),u=this.charStream.tokenize(t-e);return parseInt(u,16)}},a.prototype.scanHexDigitsTimes=function(e){var t=e;do{var r=this.charStream.getNextChar();if(!u.Identifyers.isHexDigit(r))return this.charStream.bwdCursorRange(t-(e-1)),!1}while(--e);return!0},a.genPunctuationScanner=function(t){for(var r=e.last(t).length,n=e.map(new Array(r),function(){return new Object}),o=r-1;-1!==o;--o)for(var a=t.length-1;-1!==a;--a){var s=t[a][o];if(!s)break;n[o][s]=!0}return function(){this.charStream.fwdCursor();for(var e=0;r>e;++e){var t=this.charStream.getNextChar();if(!n[e][t]){void 0!==t&&this.charStream.bwdCursor();break}}return this.token=this.createTokenFromPos(u.TokenType.punctuation,this.startPos),i.finish}},a.prototype.createPos=function(){return{start:{line:this.startLineno,column:this.relativeStartCursor},end:this.getCurrentCursorPos()}},a.prototype.createTokenFromPos=function(e,t){var u=this.charStream.tokenize(this.absoluteStartCursor);return this.createToken(e,u,t)},a.prototype.createToken=function(e,t,u){var r={type:e,value:t,subType:u};return this.options.loc&&(r.loc=this.createPos()),r},a.prototype.genIntegerFromArray=function(e,t,u){for(var r=0,n=t;u>n;++n)r=10*r+e[n];return r},a.prototype.createNumber=function(e,t,u){var r=t+u;if(0>r){var n=this.genIntegerFromArray(e,0,e.length);return n/Math.pow(10,t-u)}if(r>e.length){var n=this.genIntegerFromArray(e,0,e.length);return n*Math.pow(10,r-e.length)}var n=this.genIntegerFromArray(e,0,r),i=this.genIntegerFromArray(e,r,e.length);return n+i/Math.pow(10,e.length-r)},a.prototype.handleScanHexDigits=function(e,t){var u=this.scanHexDigits(e);return void 0===u?(this.exceptionHandler.addException("",this.lineno,this.charStream.getCursor()),!1):(t.addCharPoint(u),!0)},a.prototype.handleNewLine=function(){++this.lineno,this.currLineCursor=this.charStream.getCursor()},a.defaultLexerOptions={loc:!1,readableTokensMode:!0,includeCommentsAsNormalTokens:!0},a}();u.Lexer=c}(u=t.lexical||(t.lexical={}))}(u=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(t){var u;!function(t){var u;!function(t){var u=function(){function t(){this.exceptions=[]}return t.prototype.addException=function(e,t,u){var r={pos:{column:u,line:t},msg:e};this.exceptions.push(r)},t.prototype.hasExceptions=function(){return!e.isEmpty(this.exceptions)},t.prototype.clear=function(){this.exceptions.length=0},t.prototype.getExceptions=function(){return this.exceptions},t}();t.ExceptionHandler=u}(u=t.utilities||(t.utilities={}))}(u=t.frontend||(t.frontend={}))}(t||(t={}));var t;!function(e){var t;!function(e){var t;!function(t){var u=function(){function t(e){this.src=e,this.cursor=0}return t.prototype.getNextChar=function(){return this.hasNext()?e.utilities.CharPoints.codePointAt(this.src,this.cursor++):void 0},t.prototype.getChar=function(){return e.utilities.CharPoints.codePointAt(this.src,this.cursor)},t.prototype.getCursor=function(){return this.cursor},t.prototype.bwdCursor=function(){--this.cursor},t.prototype.fwdCursor=function(){this.hasNext()&&++this.cursor},t.prototype.bwdCursorRange=function(e){this.cursor=Math.max(this.cursor-e,0)},t.prototype.tokenize=function(e){return this.src.substring(e,this.cursor)},t.prototype.match=function(e){var t=this.getNextChar();return t===e?!0:(void 0!==t&&this.bwdCursor(),!1)},t.prototype.matchComplex=function(e){var t=this.getNextChar();return e(t)?!0:(void 0!==t&&this.bwdCursor(),!1)},t.prototype.isEof=function(){return this.cursor>=this.src.length},t.prototype.hasNext=function(){return this.cursor<this.src.length},t}();t.CharacterStream=u}(t=e.lexical||(e.lexical={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(e){var t;!function(e){var t;!function(t){function u(t,u){for(var r=new e.lexical.CharacterStream(t),n=new e.utilities.ExceptionHandler,i=new e.lexical.Lexer(r,n,u),o=[];i.hasNext();){var a=i.nextToken();o.push(a)}var s={tokens:o};return n.hasExceptions()&&(s.exceptions=n.getExceptions()),s}t.tokenize=u}(t=e.api||(e.api={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this.enablePos=e}return e.prototype.createNode=function(e,t){return this.enablePos&&(e.loc=t),e},e.prototype.createProgram=function(e,t){return this.createNode({type:"Program",body:e},t)},e.prototype.createStatementEmpty=function(e){return this.createNode({type:"EmptyStatement"},e)},e.prototype.createStatementBlock=function(e,t){return this.createNode({type:"BlockStatement",body:e},t)},e.prototype.createStatementExpression=function(e,t){return this.createNode({type:"ExpressionStatement",expression:e},t)},e.prototype.createStatementIf=function(e,t,u,r){return this.createNode({type:"IfStatement",test:e,consequent:t,alternate:u},r)},e.prototype.createStatementBreak=function(e,t){return this.createNode({type:"BreakStatement",label:e},t)},e.prototype.createStatementContinue=function(e,t){return this.createNode({type:"ContinueStatement",label:e},t)},e.prototype.createStatementSwitch=function(e,t,u){return this.createNode({type:"SwitchStatement",discriminant:e,cases:t},u)},e.prototype.createStatementReturn=function(e,t){return this.createNode({type:"ReturnStatement",argument:e},t)},e.prototype.createStatementThrow=function(e,t){return this.createNode({type:"ThrowStatement",argument:e},t)},e.prototype.createStatementTry=function(e,t,u,r){return this.createNode({type:"TryStatement",block:e,handler:t,finalizer:u},r)},e.prototype.createStatementWhile=function(e,t,u){return this.createNode({type:"WhileStatement",test:e,body:t},u)},e.prototype.createStatementDoWhile=function(e,t,u){return this.createNode({type:"DoWhileStatement",body:e,test:t},u)},e.prototype.createStatementFor=function(e,t,u,r,n){return this.createNode({type:"ForStatement",init:e,test:t,update:u,body:r},n)},e.prototype.createStatementForIn=function(e,t,u,r,n){return this.createNode({type:"ForInStatement",left:e,right:t,body:u,each:r},n)},e.prototype.createStatementDebugger=function(e){
return this.createNode({type:"ForInStatement",loc:e},e)},e.prototype.createDeclarationFunction=function(e,t,u,r,n){return this.createNode({type:"FunctionDeclaration",id:e,params:t,body:u},n)},e.prototype.createDeclarationVariable=function(e,t){return this.createNode({type:"VariableDeclaration",declarations:e,kind:"var"},t)},e.prototype.createVariableDeclarator=function(e,t,u){return this.createNode({type:"VariableDeclarator",id:e,init:t},u)},e.prototype.createExpressionThis=function(e){return this.createNode({type:"ThisExpression",loc:e},e)},e.prototype.createExpressionArray=function(e,t){return this.createNode({type:"ArrayExpression",elements:e},t)},e.prototype.createExpressionObject=function(e,t){return this.createNode({type:"ObjectExpression",properties:e},t)},e.prototype.createObjectProperty=function(e,t,u,r){return this.createNode({type:"Property",key:e,value:t,kind:u},r)},e.prototype.createExpressionFunction=function(e,t,u,r){return this.createNode({type:"FunctionExpression",id:e,params:t,body:u},r)},e.prototype.createExpressionSequence=function(e,t){return this.createNode({type:"SequenceExpression",expressions:e},t)},e.prototype.createExpressionUnary=function(e,t,u,r){return this.createNode({type:"UnaryExpression",operator:e,prefix:t,argument:u},r)},e.prototype.createExpressionBinary=function(e,t,u,r){return this.createNode({type:"BinaryExpression",operator:e,left:t,right:u},r)},e.prototype.createExpressionAssignment=function(e,t,u,r){return this.createNode({type:"AssignmentExpression",operator:e,left:t,right:u},r)},e.prototype.createExpressionUpdate=function(e,t,u,r){return this.createNode({type:"UpdateExpression",operator:e,argument:t,prefix:u},r)},e.prototype.createExpressionLogical=function(e,t,u,r){return this.createNode({type:"LogicalExpression",operator:e,left:t,right:u},r)},e.prototype.createExpressionConditional=function(e,t,u,r){return this.createNode({type:"ConditionalExpression",test:e,alternate:t,consequent:u},r)},e.prototype.createExpressionNew=function(e,t,u){return this.createNode({type:"NewExpression",callee:e,arguments:t},u)},e.prototype.createExpressionCall=function(e,t,u){return this.createNode({type:"CallExpression",callee:e,arguments:t},u)},e.prototype.createExpressionMember=function(e,t,u,r){return this.createNode({type:"MemberExpression",object:e,property:t,computed:u},r)},e.prototype.createSwitchCase=function(e,t,u){return this.createNode({type:"SwitchCase",test:e,consequent:t},u)},e.prototype.createCatchClause=function(e,t,u){return this.createNode({type:"CatchClause",param:e,body:t},u)},e.prototype.createIdentifier=function(e,t){return this.createNode({type:"Identifier",name:e},t)},e.prototype.createLiteral=function(e,t){return this.createNode({type:"Literal",value:e},t)},e}();e.NodeFactory=t}(t=e.syntax||(e.syntax={}))}(t=e.frontend||(e.frontend={}))}(t||(t={}));var t;!function(t){var u;!function(t){var u;!function(u){var r=function(){function r(n,i){this.options=i,this.options=e.defaults(e.clone(i||{}),r.defaultParserOptions),this.nodeFactory=new u.NodeFactory(this.options.loc),this.parseException=new t.utilities.ExceptionHandler,this.charStream=new t.lexical.CharacterStream(n),this.lexException=new t.utilities.ExceptionHandler;var o={loc:!0,readableTokensMode:!1,includeCommentsAsNormalTokens:!1};this.lex=new t.lexical.Lexer(this.charStream,this.lexException,o)}return r.prototype.addException=function(e){var t=this.lex.isEof(e)?"end of file":e.value;this.parseException.addException("Undexpected token: '"+t+"'",e.loc.start.line,e.loc.start.column)},r.prototype.trimOptionalSemicolon=function(){var e=this.lex.lookAheadNextToken();if(this.lex.isPunctuationValue(e,";"))this.lex.nextToken();else if(this.tokenIsInSameLine(e)&&!this.lex.isEof(e))return this.addException(e),!1;return!0},r.prototype.trackPositionUnary=function(e){return e.loc},r.prototype.trackPositionByPos=function(e){var t=this.lex.latestToken();return this.createLoc(e,t.loc.end)},r.prototype.trackPositionByToken=function(e){var t=this.lex.latestToken();return this.createLoc(e.loc.start,t.loc.end)},r.prototype.createLoc=function(e,t){return{start:e,end:t}},r.prototype.expectPunctuation=function(e){var t=this.lex.nextToken();return this.lex.isPunctuationValue(t,e)?!0:(this.addException(t),!1)},r.prototype.expectKeyword=function(e){var t=this.lex.nextToken();return this.lex.isKeywordValue(t,e)?!0:(this.addException(t),!1)},r.prototype.tokenIsInSameLine=function(e){return e.loc.end.line===this.lex.latestToken().loc.end.line},r.prototype.parse=function(){var e=this.lex.lookAheadNextToken(),t=this.parseSourceElements();return t?this.nodeFactory.createProgram(t,this.trackPositionByToken(e)):void 0},r.prototype.parseSourceElements=function(){for(var e=[];this.lex.hasNext();){var t=this.parseStatement();if(!t)return;e.push(t)}return e},r.prototype.parseSourceElement=function(){var e=this.lex.lookAheadNextToken();return this.lex.isKeywordValue(e,"function")?this.parseFunctionDeclaration():this.parseStatement()},r.prototype.parseStatement=function(){var e=this.lex.lookAheadNextToken();if(this.lex.isKeyword(e))switch(e.value){case"var":return this.parseVariableStatement();case"if":return this.parseIfStatement();case"while":return this.parseWhileStatement();case"do":return this.parseDoWhileStatement();case"for":return this.parseForStatement()}if(this.lex.isPunctuation(e))switch(e.value){case"{":return this.parseBlockStatement();case";":return this.parseEmptyStatement()}return this.parseExpressionStatement()},r.prototype.parseBlockStatement=function(){var e=this.lex.lookAheadNextToken();if(this.expectPunctuation("{")){for(var t=[],u=this.lex.lookAheadNextToken();!this.lex.isPunctuationValue(u,"}");){var r=this.parseStatement();if(!r)return;t.push(r),u=this.lex.lookAheadNextToken()}if(this.expectPunctuation("}"))return this.nodeFactory.createStatementBlock(t,this.trackPositionByToken(e))}},r.prototype.parseEmptyStatement=function(){var e=this.lex.lookAheadNextToken();return this.expectPunctuation(";")?this.nodeFactory.createStatementEmpty(this.trackPositionByToken(e)):void 0},r.prototype.parseIfStatement=function(){var e=this.lex.lookAheadNextToken(),t=this.parseKeywordLparExpressionRpar("if");if(t){var u=this.parseStatement();if(u){var r=null;if(!this.lex.matchKeyword("else")||(r=this.parseStatement()))return this.nodeFactory.createStatementIf(t,u,r,this.trackPositionByToken(e))}}},r.prototype.parseWhileStatement=function(){var e=this.lex.lookAheadNextToken(),t=this.parseKeywordLparExpressionRpar("while");if(t){var u=this.parseStatement();return u?this.nodeFactory.createStatementWhile(t,u,this.trackPositionByToken(e)):void 0}},r.prototype.parseDoWhileStatement=function(){var e=this.lex.lookAheadNextToken();if(this.expectKeyword("do")){var t=this.parseStatement();if(t){var u=this.parseKeywordLparExpressionRpar("while");if(u)return this.lex.matchPunctuation(";"),this.nodeFactory.createStatementDoWhile(t,u,this.trackPositionByToken(e))}}},r.prototype.parseForStatement=function(){var e=this.lex.lookAheadNextToken();if(this.expectKeyword("for")&&this.expectPunctuation("(")){var t,u=null,n=null,i=this.lex.lookAheadNextToken();if(!this.lex.isPunctuationValue(i,";"))if(this.lex.isKeywordValue(i,"var")){if(this.lex.nextToken(),t=this.parseVariableDeclarators(),!t)return;u=this.nodeFactory.createDeclarationVariable(t,this.trackPositionByToken(i))}else if(n=this.parseExpression(),!n)return;var o=!1,a=null;if(i=this.lex.lookAheadNextToken(),this.lex.isKeywordValue(i,"in")){if(this.lex.nextToken(),o=!0,!n&&!t||n&&!r.isLeftHandExpressionResolvingToReference(n)||t&&1!==t.length)return void this.parseException.addException("for in left side should resolve to reference",e.loc.start.line,e.loc.start.column)}else{if(!this.expectPunctuation(";"))return;if(i=this.lex.lookAheadNextToken(),!this.lex.isPunctuationValue(i,";")&&(a=this.parseExpression(),!a))return;if(!this.expectPunctuation(";"))return}var s=null;if(i=this.lex.lookAheadNextToken(),this.lex.isPunctuationValue(i,")")||(s=this.parseExpression())){if(o&&!s)return void this.addException(i);if(this.expectPunctuation(")")){var c=this.parseStatement();if(c){var h=this.trackPositionByToken(e),p=n||u;return o?this.nodeFactory.createStatementForIn(p,s,c,!1,h):this.nodeFactory.createStatementFor(p,a,s,c,h)}}}}},r.prototype.parseKeywordLparExpressionRpar=function(e){if(this.expectKeyword(e)&&this.expectPunctuation("(")){var t=this.parseExpression();return t&&this.expectPunctuation(")")?t:void 0}},r.prototype.parseVariableStatement=function(){var e=this.lex.lookAheadNextToken();if(this.expectKeyword("var")){var t=this.parseVariableDeclarators();if(this.trimOptionalSemicolon())return this.nodeFactory.createDeclarationVariable(t,this.trackPositionByToken(e))}},r.prototype.parseVariableDeclarators=function(){var e=this.parseVariableDeclarator();if(e){for(var t=[e];this.lex.matchPunctuation(",");){var u=this.parseVariableDeclarator();if(!u)return;t.push(u)}return t}},r.prototype.parseVariableDeclarator=function(){var e=this.lex.lookAheadNextToken(),t=this.parseIdentifier();if(t){var u=null;if(!this.lex.matchPunctuation("=")||(u=this.parseAssignmentExpression()))return this.nodeFactory.createVariableDeclarator(t,u,this.trackPositionByToken(e))}},r.prototype.parseExpressionStatement=function(){var e=this.lex.lookAheadNextToken(),t=this.parseExpression();return t&&this.trimOptionalSemicolon()?this.nodeFactory.createStatementExpression(t,this.trackPositionByToken(e)):void 0},r.prototype.parseFunctionDeclaration=function(){throw new Error("not implemented yet")},r.prototype.parseExpression=function(){var e=this.lex.lookAheadNextToken(),t=this.parseAssignmentExpression();if(t){if(this.lex.matchPunctuation(",")){var u=[t];do{var r=this.parseAssignmentExpression();if(!r)return;u.push(r)}while(this.lex.matchPunctuation(","));return this.nodeFactory.createExpressionSequence(u,this.trackPositionByToken(e))}return t}},r.isLeftHandExpressionResolvingToReference=function(e){return"Identifier"===e.type||"MemberExpression"===e.type},r.prototype.parseAssignmentExpression=function(){var e=this.lex.lookAheadNextToken(),t=this.parseConditionalExpression();if(t){var u=this.lex.lookAheadNextToken();if(this.lex.isPunctuation(u)&&r.AssignmentOperators[u.value]){if(!r.isLeftHandExpressionResolvingToReference(t))return void this.parseException.addException("Invalid left-hand side in assignment",u.loc.start.line,u.loc.start.column);this.lex.nextToken();var n=this.parseAssignmentExpression();if(!n)return;return this.nodeFactory.createExpressionAssignment(u.value,t,n,this.trackPositionByToken(e))}return t}},r.prototype.parseConditionalExpression=function(){var e=this.lex.lookAheadNextToken(),t=this.parseBinaryExpression();if(t){var u=this.lex.lookAheadNextToken();if(this.lex.isPunctuationValue(u,"?")){this.lex.nextToken();var r=this.parseAssignmentExpression();if(!r)return;if(!this.expectPunctuation(":"))return;var n=this.parseAssignmentExpression();if(!n)return;return this.nodeFactory.createExpressionConditional(t,n,r,this.trackPositionByToken(e))}return t}},r.isLogicBinaryTokenValue=function(e){return e<=r.BinaryTokenValues_islogic},r.prototype.createBinaryExpression=function(e,t,u,n){var i=this.options.loc?this.createLoc(u.loc.start,n.loc.end):void 0;return r.isLogicBinaryTokenValue(e)?this.nodeFactory.createExpressionLogical(t,u,n,i):this.nodeFactory.createExpressionBinary(t,u,n,i)},r.prototype.parseBinaryExpression=function(){var t=this.parseUnaryExpression();if(t){var u=this.lex.lookAheadNextToken(),n=r.BinaryTokenValues[u.value];if(n&&(this.lex.isPunctuation(u)||this.lex.isKeyword(u))){this.lex.nextToken();var i=this.parseUnaryExpression();if(!i)return;for(var o=[t,i],a=[u.value],s=[n];;){u=this.lex.lookAheadNextToken();var c=r.BinaryTokenValues[u.value];if(!c||!this.lex.isPunctuation(u)&&!this.lex.isKeyword(u))break;this.lex.nextToken();var h=this.parseUnaryExpression();if(!h)return;for(var p=e.last(s);p&&p>=c;){var l=o.pop(),D=o.pop(),C=this.createBinaryExpression(s.pop(),a.pop(),D,l);o.push(C),p=e.last(s)}s.push(c),a.push(u.value),o.push(h)}for(t=o.pop();a.length;)t=this.createBinaryExpression(s.pop(),a.pop(),o.pop(),t)}return t}},r.prototype.parseUnaryExpression=function(){var e=this.lex.lookAheadNextToken(),t=r.UnaryTokenValues[e.value];if(t&&(this.lex.isPunctuation(e)||this.lex.isKeyword(e))){this.lex.nextToken();var u=this.parsePostfixExpression();if(!u)return;return t===r.UnaryTokenValues_update?this.nodeFactory.createExpressionUpdate(e.value,u,!0,this.trackPositionByToken(e)):this.nodeFactory.createExpressionUnary(e.value,!0,u,this.trackPositionByToken(e))}return this.parsePostfixExpression()},r.prototype.parsePostfixExpression=function(){var e=this.lex.lookAheadNextToken(),t=this.parseLeftHandSideExpression(!0);if(t){var u=this.lex.lookAheadNextToken();return!this.lex.isPunctuation(u)||u.loc.end.line!==this.lex.latestToken().loc.end.line||"++"!==u.value&&"--"!==u.value?t:(this.lex.nextToken(),this.nodeFactory.createExpressionUpdate(u.value,t,!1,this.trackPositionByToken(e)))}},r.prototype.parseIdentifier=function(){var e=this.lex.nextToken();return this.lex.isIdentifier(e)?this.nodeFactory.createIdentifier(e.value,this.trackPositionUnary(e)):void this.addException(e)},r.prototype.parseLeftHandSideExpression=function(e){var t,u=this.lex.lookAheadNextToken();if(this.lex.isKeyword(u))switch(u.value){case"function":return this.parseFunctionExpression();case"new":t=this.parseNewExpression()}if(t=t||this.parsePrimaryExpression()){for(var r,n=!0;n;){var i=this.lex.lookAheadNextToken();if(!this.lex.isPunctuation(i))break;switch(i.value){case"[":if(this.lex.nextToken(),r=this.parseExpression(),!r)return;if(!this.expectPunctuation("]"))return;t=this.nodeFactory.createExpressionMember(t,r,!0,this.trackPositionByToken(u));break;case".":this.lex.nextToken();var o=this.parseIdentifier();if(!o)return;t=this.nodeFactory.createExpressionMember(t,o,!1,this.trackPositionByToken(u));break;case"(":if(e){var a=this.parseArguments();if(!a)return;t=this.nodeFactory.createExpressionCall(t,a,this.trackPositionByToken(u));break}default:n=!1}}return t}},r.prototype.parsePrimaryExpression=function(){var e=this.lex.lookAheadNextToken();switch(e.type){case t.lexical.TokenType.keyword:if("this"===e.value)return this.lex.nextToken(),this.nodeFactory.createExpressionThis(this.trackPositionUnary(e));break;case t.lexical.TokenType.identifier:return this.lex.nextToken(),this.nodeFactory.createIdentifier(e.value,this.trackPositionUnary(e));case t.lexical.TokenType.literal:return this.lex.nextToken(),this.nodeFactory.createLiteral(e.value,this.trackPositionUnary(e));case t.lexical.TokenType.punctuation:switch(e.value){case"[":return this.parseArrayLiteral();case"{":return this.parseObjectLiteral();case"(":var u=(this.lex.nextToken(),this.parseExpression());if(!u)return;return this.lex.matchPunctuation(")")?u:void this.addException(this.lex.nextToken())}}this.addException(e)},r.prototype.parseNewExpression=function(){var e=this.lex.lookAheadNextToken();if(this.expectKeyword("new")){var t=this.parseLeftHandSideExpression(!1);if(t){var u,r=this.lex.lookAheadNextToken();if(!this.lex.isPunctuationValue(r,"(")||(u=this.parseArguments()))return this.nodeFactory.createExpressionNew(t,u||[],this.trackPositionByToken(e))}}},r.prototype.parseArguments=function(){if(this.expectPunctuation("(")){var e=this.lex.lookAheadNextToken(),t=[];if(this.lex.isPunctuationValue(e,")"))return this.lex.nextToken(),t;for(;;){var u=this.parseAssignmentExpression();if(!u)return;if(t.push(u),e=this.lex.nextToken(),this.lex.isPunctuationValue(e,")"))break;if(!this.lex.isPunctuationValue(e,","))return void this.addException(e)}return t}},r.prototype.parseArrayLiteral=function(){var e=this.lex.lookAheadNextToken();if(this.expectPunctuation("[")){var t=[];for(this.trimArrayCommas(t);!this.lex.matchPunctuation("]");){var u=this.parseAssignmentExpression();if(!u)return;t.push(u),this.lex.matchPunctuation(",")&&this.trimArrayCommas(t)}return this.nodeFactory.createExpressionArray(t,this.trackPositionByToken(e))}},r.prototype.trimArrayCommas=function(e){for(;this.lex.matchPunctuation(",");)e.push(null)},r.prototype.parseObjectLiteral=function(){var e=this.lex.lookAheadNextToken();if(this.expectPunctuation("{")){for(var t=[];;){var u=this.lex.lookAheadNextToken();if(this.lex.isPunctuationValue(u,"}")){this.lex.nextToken();break}var r=this.parsePropertyAssignment();if(!r)return;if(t.push(r),u=this.lex.nextToken(),this.lex.isPunctuationValue(u,"}"))break;if(!this.lex.isPunctuationValue(u,","))return void this.addException(u)}return this.nodeFactory.createExpressionObject(t,this.trackPositionByToken(e))}},r.prototype.parsePropertyAssignment=function(){var e,t=this.lex.lookAheadNextToken();e=this.lex.isIdentifierValue(t,"get")?"get":this.lex.isIdentifierValue(t,"set")?"set":"init";var u=this.parsePropertyName();if(u){var r=this.lex.nextToken();if(this.lex.isPunctuationValue(r,":")){var n=this.parseAssignmentExpression();if(!n)return;return this.nodeFactory.createObjectProperty(u,n,e,this.trackPositionByToken(t))}if(this.lex.isPunctuationValue(r,"(")){var i=[];if(r=this.lex.nextToken(),this.lex.isIdentifier(r)){if(i.push(r.value),!this.expectPunctuation(")"))return}else if(!this.lex.isPunctuationValue(r,")"))return void this.addException(r);if(!this.expectPunctuation("{"))return;var o=this.parseFunctionBody();if(!this.expectPunctuation("}"))return;var a=this.nodeFactory.createExpressionFunction(null,i,o,this.trackPositionByToken(r));return this.nodeFactory.createObjectProperty(u,a,e,this.trackPositionByToken(t))}this.addException(r)}},r.prototype.parsePropertyName=function(){var e=this.lex.nextToken();return this.lex.isLiteral(e)?e.subType===t.lexical.LiteralSubType.string||e.subType===t.lexical.LiteralSubType.number?this.nodeFactory.createLiteral(e.value,this.trackPositionUnary(e)):this.nodeFactory.createIdentifier(e.value,this.trackPositionUnary(e)):this.lex.isIdentifier(e)?this.nodeFactory.createIdentifier(e.value,this.trackPositionUnary(e)):void this.addException(e)},r.prototype.parseFunctionExpression=function(){throw new Error("not implemented yet")},r.prototype.parseFunctionBody=function(){throw new Error("not implemented yet")},r.defaultParserOptions={loc:!1},r.AssignmentOperators={"=":!0,"||":!0,"*=":!0,"/=":!0,"%=":!0,"+=":!0,"-=":!0,"<<=":!0,">>=":!0,">>>=":!0,"&=":!0,"^=":!0,"|=":!0},r.BinaryTokenValues_or=1,r.BinaryTokenValues_and=2,r.BinaryTokenValues_islogic=r.BinaryTokenValues_and,r.BinaryTokenValues_bor=3,r.BinaryTokenValues_xor=4,r.BinaryTokenValues_band=5,r.BinaryTokenValues_eq=6,r.BinaryTokenValues_rel=7,r.BinaryTokenValues_shift=8,r.BinaryTokenValues_add=9,r.BinaryTokenValues_multi=10,r.BinaryTokenValues={"||":r.BinaryTokenValues_or,"&&":r.BinaryTokenValues_and,"|":r.BinaryTokenValues_bor,"^":r.BinaryTokenValues_xor,"&":r.BinaryTokenValues_band,"==":r.BinaryTokenValues_eq,"!=":r.BinaryTokenValues_eq,"===":r.BinaryTokenValues_eq,"!==":r.BinaryTokenValues_eq,"<":r.BinaryTokenValues_rel,">":r.BinaryTokenValues_rel,"<=":r.BinaryTokenValues_rel,">=":r.BinaryTokenValues_rel,"instanceof":r.BinaryTokenValues_rel,"in ":r.BinaryTokenValues_rel,"<<":r.BinaryTokenValues_shift,">>":r.BinaryTokenValues_shift,">>>":r.BinaryTokenValues_shift,"+":r.BinaryTokenValues_add,"-":r.BinaryTokenValues_add,"*":r.BinaryTokenValues_multi,"/":r.BinaryTokenValues_multi,"%":r.BinaryTokenValues_multi},r.UnaryTokenValues_unary=1,r.UnaryTokenValues_update=2,r.UnaryTokenValues={"-":r.UnaryTokenValues_unary,"+":r.UnaryTokenValues_unary,"!":r.UnaryTokenValues_unary,"~":r.UnaryTokenValues_unary,"typeof":r.UnaryTokenValues_unary,"void":r.UnaryTokenValues_unary,"delete":r.UnaryTokenValues_unary,"++":r.UnaryTokenValues_update,"--":r.UnaryTokenValues_update},r}();u.Parser=r}(u=t.syntax||(t.syntax={}))}(u=t.frontend||(t.frontend={}))}(t||(t={}));var t;return!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!e)throw new Error("Assertion fail: "+t)}e.assert=t}(t=e.utilities||(e.utilities={}))}(t=e.frontend||(e.frontend={}))}(t||(t={})),t});